define(function(){return smControls=function(e){var t=e;t.registerObserver(this);var s,n,a,i=!1,m=!1,c=!0,l=!1,p=!1,r=!1,o=!1,d=null,u=null,b=null,E=null,y=null,C=null,g=null,f=null,e=null,v=scenappsmPlayerType.A_TYPE,_=!1,N=!1,R=0,A=0,T="";function L(e){T=e.type}function h(e){switch(e.target.id){case"skipbackwardBtn":j(scenappsmPlayerCommand.BACKWARD);break;case"skipforwardBtn":j(scenappsmPlayerCommand.FORWARD)}}(d=scenappsm._elements.createElement("div",t.getCssReform("player-control-bar"))).style.opacity=0,d.addEventListener("mouseover",L),d.addEventListener("mouseleave",L),u=scenappsm._elements.createElement("div",t.getCssReform("style-default control-bar-bg control-bar-size")),d.appendChild(u),E=scenappsm._elements.createElement("div",t.getCssReform("control-group-left")),u.appendChild(E),a=scenappsm._elements.createMultiElement([{name:"div",className:t.getCssReform("btn-area pause"),id:"PlayPauseBtn"},{name:"button",className:t.getCssReform("icon icon-controls icon-play"),id:"playpausebtn"}]),E.appendChild(a),scenappsm._elements.getFirstElementsByTagName(a,"button").ariaLabel=ScenappsmAccessbility.play,scenappsm.addEventListener(a,"click",function(){j(scenappsmPlayerCommand.PLAY_PAUSE)}),s=scenappsm._elements.createMultiElement([{name:"div",className:t.getCssReform("btn-area skipbackward"),id:"skipbackward"},{name:"button",className:t.getCssReform("icon icon-controls icon-skipbackward"),id:"skipbackwardBtn"}]),E.appendChild(s),scenappsm.addEventListener(s,"click",h),scenappsm._elements.getFirstElementsByTagName(s,"button").ariaLabel=ScenappsmAccessbility.backward.replace("{SEC}",t.getSkipForwardTime()),e=scenappsm._elements.createMultiElement([{name:"div",className:t.getCssReform("btn-area skipforward"),id:"skipforward"},{name:"button",className:t.getCssReform("icon icon-controls icon-skipforward"),id:"skipforwardBtn"}]),E.appendChild(e),scenappsm.addEventListener(e,"click",h),scenappsm._elements.getFirstElementsByTagName(e,"button").ariaLabel=ScenappsmAccessbility.forward.replace("{SEC}",t.getSkipForwardTime()),y=scenappsm._elements.createMultiElement([{name:"div",className:t.getCssReform("live-streaming"),id:""},{name:"span",className:"",id:""}]),scenappsm._elements.getFirstElementsByTagName(y,"span").innerHTML="LIVE",E.appendChild(y),_speedBtnContainer=scenappsm._elements.createMultiElement([{name:"div",className:t.getCssReform("btn-area speed-btn"),id:"SpeedBtn"},{name:"button",className:t.getCssReform("btn-text text-button control-text"),id:""}]),E.appendChild(_speedBtnContainer),_speedBtnContainer.addEventListener("click",function(){j(scenappsmPlayerCommand.PLAYBACK_RATE)}),(C=scenappsm._elements.getFirstElementsByTagName(_speedBtnContainer,"button")).innerHTML="1X",C.ariaLabel=ScenappsmAccessbility.playbackrate,C.setAttribute("aria-haspopup",!0),C.setAttribute("aria-owns",scenappsmPlayerCommand.PLAYBACK_RATE_SWITCH),g=scenappsm._elements.createElement("div",t.getCssReform("time-display")),E.appendChild(g),(f=scenappsm._elements.createSecondDepthElement("div",t.getCssReform("current-time"),"span",t.getCssReform("time control-text"))).ariaLabel=ScenappsmAccessbility.currentTime,scenappsm._elements.getFirstElementsByTagName(f,"span").innerHTML="00:00",g.appendChild(f),e=null,(e=scenappsm._elements.createElement("div",t.getCssReform("time-divider control-text"))).innerHTML="/",g.appendChild(e);var B=null;(B=scenappsm._elements.createSecondDepthElement("div",t.getCssReform("duraion-time"),"span",t.getCssReform("time control-text"))).ariaLabel=ScenappsmAccessbility.duration,scenappsm._elements.getFirstElementsByTagName(B,"span").innerHTML="00:00",g.appendChild(B);var P=null,P=scenappsm._elements.createElement("div",t.getCssReform("control-group-right"));u.appendChild(P);var S,k=null,k=scenappsm._elements.createElement("div",t.getCssReform("volum-area"),"volum");P.appendChild(k),S=scenappsm._elements.createMultiElement([{name:"div",className:t.getCssReform("btn-area quality-btn"),id:"QualityBtn"},{name:"button",className:t.getCssReform("btn-text control-text"),id:""}]),P.appendChild(S);var I,M,O,F,D=scenappsm._elements.getFirstElementsByTagName(S,"button");function w(){j(scenappsmPlayerCommand.QUALITY)}function U(){j(scenappsmPlayerCommand.CAPTION)}function V(){j(scenappsmPlayerCommand.SHARE)}D.innerHTML="720p",D.ariaLabel=ScenappsmAccessbility.quality,D.setAttribute("aria-haspopup",!0),D.setAttribute("aria-owns",scenappsmPlayerCommand.QUALITY_SWITCH),scenappsm.addEventListener(S,"click",w),I=scenappsm._elements.createMultiElement([{name:"div",className:t.getCssReform("btn-area subtitle-btn"),id:"SubtitleBtn"},{name:"button",className:t.getCssReform("icon icon-controls icon-subtitle-01"),id:""}]),P.appendChild(I),(u=scenappsm._elements.getFirstElementsByTagName(I,"button")).ariaLabel=ScenappsmAccessbility.caption,u.setAttribute("aria-haspopup",!0),u.setAttribute("aria-owns",scenappsmPlayerCommand.CAPTION_CHANGE),scenappsm.addEventListener(I,"click",U),M=scenappsm._elements.createMultiElement([{name:"div",className:t.getCssReform("btn-area share-btn"),id:"ShareBtn"},{name:"button",className:t.getCssReform("icon icon-controls icon-share"),id:""}]),P.appendChild(M),scenappsm._elements.getFirstElementsByTagName(M,"button").ariaLabel=ScenappsmAccessbility.share,scenappsm.addEventListener(M,"click",V),O=scenappsm._elements.createMultiElement([{name:"div",className:t.getCssReform("btn-area pip-btn"),id:"pipBtn"},{name:"button",className:t.getCssReform("icon icon-controls icon-PIP-mode"),id:""}]),P.appendChild(O),O.style.display="none",scenappsm._elements.getFirstElementsByTagName(O,"button").ariaLabel=ScenappsmAccessbility.pip_mode,scenappsm.addEventListener(O,"click",function(){j(scenappsmPlayerCommand.PICTURE_IN_PICTURE)}),F=scenappsm._elements.createMultiElement([{name:"div",className:t.getCssReform("btn-area fullscreen-btn"),id:"FullscreenBtn"},{name:"button",className:t.getCssReform("icon icon-controls icon-fullscreen-expand"),id:""}]),P.appendChild(F);var H,Y,x,q,W,Q=scenappsm._elements.getFirstElementsByTagName(F,"button");function K(){j(scenappsmPlayerCommand.WECANDEO)}Q.ariaLabel=ScenappsmAccessbility.fullscreen,scenappsm.addEventListener(F,"click",function(){j(scenappsmPlayerCommand.FULLSCREEN)}),(H=scenappsm._elements.createElement("div",t.getCssReform("control-option-m top-horizontal"),"control-m")).style.display="none",H.style.opacity=0,Y=scenappsm._elements.createMultiElement([{name:"div",className:t.getCssReform("btn-area quality-btn-m"),id:"QualityBtn"},{name:"button",className:t.getCssReform("icon icon-quality"),id:""}]),H.appendChild(Y),scenappsm.addEventListener(Y,"click",w),_mQualityBtn=scenappsm._elements.getFirstElementsByTagName(Y,"button"),_mQualityBtn.ariaLabel=ScenappsmAccessbility.quality,x=scenappsm._elements.createMultiElement([{name:"div",className:t.getCssReform("btn-area subtitle-btn-m"),id:"SubtitleBtn"},{name:"button",className:t.getCssReform("icon icon-subtitle-01"),id:""}]),H.appendChild(x),scenappsm.addEventListener(x,"click",U),_mCaptionBtn=scenappsm._elements.getFirstElementsByTagName(x,"button"),_mCaptionBtn.ariaLabel=ScenappsmAccessbility.caption,q=scenappsm._elements.createMultiElement([{name:"div",className:t.getCssReform("btn-area share-btn-m"),id:"ShareBtn"},{name:"button",className:t.getCssReform("icon icon-share"),id:""}]),H.appendChild(q),scenappsm.addEventListener(q,"click",V),_mShareBtn=scenappsm._elements.getFirstElementsByTagName(q,"button"),_mShareBtn.ariaLabel=ScenappsmAccessbility.share,1==t.getParams().isFP&&(W=scenappsm._elements.createMultiElement([{name:"div",className:t.getCssReform("btn-area"),id:"WecandeoBtn"},{name:"button",className:t.getCssReform("icon icon-controls")+" icon-wecandeo-logo-w",id:""}]),P.appendChild(W),scenappsm.addEventListener(W,"click",K),(u=scenappsm._elements.getFirstElementsByTagName(W,"button")).style.width="108px",u.ariaLabel=ScenappsmAccessbility.fullscreen,u=scenappsm._elements.createMultiElement([{name:"div",className:t.getCssReform("btn-area"),id:"WecandeoBtn"},{name:"button",className:t.getCssReform("icon icon-controls")+" icon-wecandeo-logo-w",id:""}]),H.appendChild(u),scenappsm.addEventListener(u,"click",K),_mWecandeoBtn=scenappsm._elements.getFirstElementsByTagName(u,"button"),_mWecandeoBtn.style.width="108px",_mWecandeoBtn.ariaLabel=ScenappsmAccessbility.share);var z=null,G=0;function X(e){1<=(G=parseFloat(d.style.opacity))&&e||G<=0&&!e?clearInterval(z):(0==(G=e?(G+=.2,Number(G.toFixed(1))):(G-=.2,(G=Number(G.toFixed(1)))<0?0:G))?(!m&&l&&v!=scenappsmPlayerType.B_TYPE&&!t.getUserAgent().isMobile()||(d.style.display="none"),H.style.display="none"):(d.style.display="",H.style.display="",se()),d.style.opacity=G,H.style.opacity=G)}function j(e,s){e!=scenappsmPlayerCommand.IN_LIVE&&1!=d.style.opacity||(0!=l||scenappsmPlayerCommand.QUALITY!=e&&scenappsmPlayerCommand.PLAYBACK_RATE!=e)&&b&&!i&&b.excute(e,s)}function Z(){1!=r&&0!=c&&(clearInterval(z),r=!0,z=setInterval(function(){X(r)},20),t.notifyObserver(scenappsmEvent.CONTROLS,!0))}function J(e){null==e&&(0==r||!t.playing()&&l)||(clearInterval(z),r=!1,z=setInterval(function(){X(r)},20),t.notifyObserver(scenappsmEvent.CONTROLS,!1))}function $(e,s){for(var t=0;t<e.childNodes.length;t++)if(e.childNodes[t]==s)return e.removeChild(s),0}function ee(){"pointer"==y.style.cursor&&(y.style.opacity=1,j(scenappsmPlayerCommand.IN_LIVE,R))}function se(){"none"!=d.style.display&&(t.getCorrectSize(d,"width")<=scenappsmMedia.WIDTH?(S.className=t.getCssReform("btn-area quality-btn-320"),M.className=t.getCssReform("btn-area share-btn-320"),I.className=t.getCssReform("btn-area subtitle-btn-320"),W&&(W.className=t.getCssReform("btn-area")+" wecandeo-btn-320"),H.className=t.getCssReform("control-option-m-320 top-horizontal-320"),x.className=t.getCssReform("btn-area subtitle-btn-m-320"),Y.className=t.getCssReform("btn-area quality-btn-m-320"),q.className=t.getCssReform("btn-area share-btn-m-320")):(k.className=t.getCssReform("volum-area"),S.className=t.getCssReform("btn-area quality-btn"),M.className=t.getCssReform("btn-area share-btn"),I.className=t.getCssReform("btn-area subtitle-btn"),W&&(W.className=t.getCssReform("btn-area")),H.className=t.getCssReform("control-option-m top-horizontal"),x.className=t.getCssReform("btn-area subtitle-btn-m"),Y.className=t.getCssReform("btn-area quality-btn-m"),q.className=t.getCssReform("btn-area share-btn-m")))}this.isPip=function(){return"block"==window.getComputedStyle(O).display},this.setMobilePosition=function(e){H.style.marginTop=e+"px"},this.isShow=function(){return 1==G},this.update=function(e,s){switch(e){case scenappsmEvent.VIDEO_READY:!t.getVideo().requestPictureInPicture&&P.contains(O)&&P.removeChild(O),p="live"==s.pack,1==(N=s.isDVR)&&(scenappsm.addEventListener(y,"click",ee),y.style.cursor="pointer"),i=!1;case scenappsmEvent.PLAYER_TYPE:v=0==s.isStatistics?scenappsmPlayerType.A_TYPE:s.playerType,0==p?$(E,y):$(H,x),1!=p&&t.getPrimary()!=smUserAgent.FLASH||$(E,_speedBtnContainer);break;case scenappsmEvent.PLAYER_READY:if(1==i)return;!function e(){var s;"absolute"==scenappsm._elements.getStyle(d).position&&0!=d.offsetHeight?(s=parseInt(scenappsm._elements.getStyle(d).margin.replace("px","")),n=d.offsetHeight+(isNaN(s)?0:s),d.style.display="none",se()):setTimeout(function(){e()},100)}();break;case scenappsmEvent.VIDEO_PLAY:l=!0,scenappsm._elements.getFirstElementsByTagName(a,"button").className=t.getCssReform("icon icon-controls icon-pause"),scenappsm._elements.getFirstElementsByTagName(a,"button").ariaLabel=ScenappsmAccessbility.pause;break;case scenappsmEvent.ALL_COMPLETE:case scenappsmEvent.VIDEO_COMPLETE:scenappsm._elements.getFirstElementsByTagName(f,"span").innerHTML=scenappsm.intToTime(0);case scenappsmEvent.VIDEO_STOP:l=!1,d.style.display="none",J();case scenappsmEvent.VIDEO_PAUSE:scenappsm._elements.getFirstElementsByTagName(a,"button").className=t.getCssReform("icon icon-controls icon-play"),scenappsm._elements.getFirstElementsByTagName(a,"button").ariaLabel=ScenappsmAccessbility.play;break;case scenappsmEvent.VIDEO_TIME:s.type==scenappsmConst.CURRENT_TIME?(scenappsm._elements.getFirstElementsByTagName(f,"span").innerHTML=scenappsm.intToTime(s.value),1==N&&(s.value<A&&A!=1/0&&!isNaN(A)?(y.style.cursor="pointer",y.className=t.getCssReform("live-streaming live-streaming-dvr")):(y.style.cursor="",y.className=t.getCssReform("live-streaming")),R=A)):s.type==scenappsmConst.DURATION&&(scenappsm._elements.getFirstElementsByTagName(B,"span").innerHTML=scenappsm.intToTime(s.value),A=s.value);break;case scenappsmEvent.VIDEO_RATE:C.innerHTML=s+"X";break;case scenappsmEvent.STREAM_QUALITY_CHANGE:case scenappsmEvent.QUALITY_CHANGE:case scenappsmEvent.VIDEO_LOAD:null!=D&&"object"==typeof s&&(D.innerHTML=s.source.label);break;case scenappsmEvent.VIDEO_FULLSCREEN:v==scenappsmPlayerType.B_TYPE&&(s?r=1!=r&&r:t.getParams().builder||J(!0)),Q.ariaLabel=s?ScenappsmAccessbility.normalscreen:ScenappsmAccessbility.fullscreen,Q.className=s?t.getCssReform("icon icon-controls icon-fullscreen-shrink"):t.getCssReform("icon icon-controls icon-fullscreen-expand"),se();break;case scenappsmEvent.ERROR:l=!(i=!0),J();break;case scenappsmEvent.MOUSE_MOVE:if(i||m||v==scenappsmPlayerType.B_TYPE&&0==t.getFullscreen())return;Z();break;case scenappsmEvent.BUILDER_MOVE:_=!0,Z();break;case scenappsmAdEvent.AD_LOAD:case scenappsmAdEvent.AD_MIDROLL_READY:m=!0;case scenappsmEvent.MOUSE_OUT:if("mouseover"==T&&!t.getUserAgent().isMobile())return;case scenappsmEvent.MOUSE_LEAVE:if(_||o)return;J();break;case scenappsmEvent.BUILDER_OUT:_=!1,J();break;case scenappsmAdEvent.AD_COMPLETE:case scenappsmAdEvent.AD_SKIP:case scenappsmAdEvent.AD_CLOSE:case scenappsmAdEvent.AD_ERROR:case scenappsmAdEvent.AD_CLICK:m=!1;break;case scenappsmEvent.RESIZE:se();break;case scenappsmEvent.VIDEO_STREAM:p=s.isLive,s.targetDuration;break;case scenappsmEvent.FREE_PLAN:o=s}},this.getContainer=function(){return d},this.getHeight=function(){return n},this.isLock=function(e){m=e},this.enabled=function(e){c=e},this.setVolumeIcon=function(e){k.appendChild(e.getContainer())},this.setController=function(e){b=e},this.getController=function(){return b},this.getMobileContainer=function(){return H},this.captionBtnVisible=function(e){I.style.display=e,H.removeChild(x)},this.shareBtnVisible=function(e){M.style.display=e,H.removeChild(q)},this.qualityBtnVisible=function(e){S.style.display=e,H.removeChild(Y)},this.fullscreenBtnVisible=function(e){F.style.display=e}},smControls});