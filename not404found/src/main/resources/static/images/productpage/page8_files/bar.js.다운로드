define(["ui/controls"],function(){return smSeekBar=function(e){var i=e;i.registerObserver(this);var t=null,p=0,a=0,r=0,l=0,o=!1,s=0,n=0;(t=scenappsm._elements.createElement("div",i.getCssReform("player-progress-container"),"")).style.top="0px",t.addEventListener(scenappsm.eventOver,C),t.addEventListener(scenappsm.eventOut,R),e=scenappsm._elements.createElement("div",i.getCssReform("player-progress-control player-progress-bar "),""),t.appendChild(e),e.style.top="0px";var c=scenappsm._elements.createElement("div",i.getCssReform("slider-rail"),"");c.style.opacity=.4,c.style.height="3px",c.style.top="12px",c.style.width="100%",e.appendChild(c);var m=scenappsm._elements.createElement("div",i.getCssReform("slider-bar"));m.style.height="3px",m.style.top="12px",e.appendChild(m);var h=scenappsm._elements.createElement("div",i.getCssReform("slider-rail"),"");h.style.opacity=.4,m.appendChild(h);var d=scenappsm._elements.createElement("div",i.getCssReform("download-progress"));d.style.opacity=.3,m.appendChild(d);var y,v,f=scenappsm._elements.createElement("div",i.getCssReform("slider-progress"));function u(e){0!=e&&(p=(y=e)*(g(n,l)/100),0!=s||v?(t.style.width=(p-a-2<1?1:p-a-2)+"px",t.style.marmginLeft="1px"):(p=e,t.style.width="100%"))}function g(e,t){return Math.min(100,Math.max(0,100*(0==t?0:e/t)))}function E(){var e;0!=y&&(e=g(r,l)/100*y-a,x(0!=a&&e<0?0:(e<0?0:e)/(p-a)*100))}function x(e){f.style.width=e=100<e?"100%":e+"%"}function C(){m.style.height="9px",m.style.top="6px",c.style.height="9px",c.style.top="6px"}function R(){m.style.height="3px",m.style.top="12px",c.style.height="3px",c.style.top="12px"}m.appendChild(f),x(0),this.setData=function(e){s=e.start,n=e.end,l=e.duration,v=e.isChapter,u(e.width)};var _=!(this.getWidth=function(){return p});this.isSeek=function(e){_=e,R()},this.setSeekTime=function(e){_=!0,r=e,E()},this.setWidth=u,this.setTitle=function(e){_title.innerHTML=e},this.update=function(e,t){switch(e){case scenappsmEvent.VIDEO_TIME:t.type==scenappsmConst.CURRENT_TIME?r=t.value:t.type==scenappsmConst.DURATION&&(l=t.value),_||E();break;case scenappsmEvent.MOUSE_POSITION:h.style.width=(n=g(t*l,l)/100*y-a,Math.min(100,Math.max(0,(n<0?0:n)/(p-a)*100))+"%");n=((s=g(t*l,l)/100*y-a)<0?0:s)/(p-a)*100;i.isMobile()&&(.5<n&&n<99.5?C:R)();break;case scenappsmEvent.VIDEO_PROGRESS:if(1==o)return;var s=t/100*y-a;d.style.width=Math.min(Math.max(0,(s<0?0:s)/(p-a)*100),100)+"%";break;case scenappsmEvent.VIDEO_STREAM:o=t.isLive}var n},this.left=function(e){t.style.left=e+"px",a=e},this.getContainer=function(){return t}},smSeekBar});