define(function(){return wecandeoData=function(e){var u=e,t=u.getPACK(),d=u.getLocalPath(),c=u.getApiServer(),p=u.getPlayServer();1==u.getParams().isCached&&(c=u.getAcsServer());var f,i="/v1/new/player/video.jsonp?k=",y="/v1/player/videofiles.jsonp?k=",l="hit",o=20,r="/live/new/player/info.jsonp?k=",n="/live/player/play.jsonp?k=",g="jsonp",h=!1;""!=d&&null!=d&&(r=d+"/json/info.json?k=",n=d+"/json/play.json?k=",i=d+"/json/video.json?k=",y=d+"/json/videofiles.json?k=",g="json");var v,D,m,_,P="",V="",I="",T=!0,k=!1,R="",E="",b=0,A=0,j=0,s=null,C=null,L=null,Y="",a=null,O=null,N=null,U=null,S=null,x=!1,w=null,K=!1,q=null,W=!0,G=null,F="A01",M=!1,B=!1,H=2,z=!0,J=0,X=null,Q="",Z="",ee=!0,te="",ie=[],ae=3e3,le=0,oe=3;function re(e){return(e=(e=(e=e.replace(/(\&\#39\;)/g,"'")).replace(/(\&\#34\;)|(\&quot\;)/g,'"')).replace(/(\&lt\;)/g,"<")).replace(/\&gt\;/,">")}function ne(e){var t={};return t.poster=ce(e.thumbnail_url),t.title=e.title,t.description=e.cdate.slice(0,e.cdate.indexOf(" ")),t.duration=scenappsm.intToTime(e.duration/1e3),t.id=e.id,t.key=e.access_key,t}function se(s){requestDev="1",null==navigator.userAgent.match(/Android/i)&&null==navigator.userAgent.match(/iPhone|iPad|iPod/i)||(requestDev="2"),$.ajax({type:"GET",timeout:ae,dataType:g,jsonp:"callback",url:c+i+s+(null!=U?"&pk="+U:"")+"&dev="+requestDev,success:function(e){le=0;try{var t=e.VideoDetail.errorInfo.errorMessage;if(t.length<1){if(u.getParams().isWe||u.getParams().builder||(document.title=re(e.VideoDetail.videoInfo.title)),pe(e.VideoDetail.videoInfo.access_key),Y={src:ce(e.VideoDetail.castUrl),label:"Auto",format:fe(e.VideoDetail.castUrl)},null!=e.VideoDetail.caption&&null!=(D=e.VideoDetail.caption).captionInfo){D.captionInfo.unshift({code:"off",format:"",label:"off",url:""});for(var i=!1,a=navigator.language||navigator.browserLanguage,l=0;l<D.captionInfo.length;l++)""!=d&&null!=d||(D.captionInfo[l].url=p+"/subtitle/get_wecloud_subtitle.php?subtitle="+encodeURI(D.captionInfo[l].url)),0<=a.indexOf(D.captionInfo[l].code)&&0==i&&(i=!0,D.captionInfo[l].default=!0);0==i&&(D.captionInfo[1].default=!0)}L=ce(e.VideoDetail.CuePointList,"content"),f=e.VideoDetail.PlayerType.config_url+"?udate="+e.VideoDetail.PlayerType.udate,P=e.VideoDetail.PlayerType.logo_link,V=e.VideoDetail.PlayerType.watermark_link,T="Y"==e.VideoDetail.PlayerType.hot_key||null==e.VideoDetail.PlayerType.hot_key,R=e.VideoDetail.videoInfo.title,E=e.VideoDetail.videoInfo.cdate,m=e.VideoDetail.videoInfo.thumbnail_url,I=e.VideoDetail.viralClickUrl,N=de(e.VideoDetail.adInfo),b=e.VideoDetail.videoInfo.id,A=e.VideoDetail.PlayerType.gid,j=e.VideoDetail.videoInfo.drm_cid,te=e.VideoDetail.videoInfo.content,x="Y"==e.VideoDetail.PlayerType.auto_start,w=e.VideoDetail.PlayerType.start_volume,K="Y"==e.VideoDetail.PlayerType.use_start_volume,q=e.VideoDetail.PlayerType.start_time,W="Y"!=e.VideoDetail.PlayerType.seek_disable,k="Y"==e.VideoDetail.PlayerType.play_list,_="Y"==e.VideoDetail.PlayerType.speed_btn?2.5:0,G=e.VideoDetail.PlayerType.ga_code,F=e.VideoDetail.PlayerType.player_skin,M="VR_SERVICE"==e.VideoDetail.videoInfo.opt,z="Y"==e.VideoDetail.videoInfo.preloading,J="Y"==e.VideoDetail.PlayerType.skip_btn?e.VideoDetail.PlayerType.skip_interval:0;var o,r,n=null,n=null!=e.VideoDetail.PlayerType.playbackrate_list?e.VideoDetail.PlayerType.playbackrate_list.split(","):[];for(r in ie=[],n)o=parseFloat(n[r]),isNaN(o)||0==o||ie.push({label:o+"X",default:1==o});o=n=null,Q="Y"==e.VideoDetail.PlayerType.use_thumbnail_previews?e.VideoDetail.videoInfo.thumbnail_sheet_url:"",Z="N"!=e.VideoDetail.PlayerType.use_screen_event,ee="N"!=e.VideoDetail.PlayerType.chk_caption_disable,h="Y"==e.VideoDetail.isFP,function t(i){requestDev="1",null!=navigator.userAgent.match(/Android/i)?requestDev="3":null!=navigator.userAgent.match(/iPhone|iPad|iPod/i)&&(requestDev="2"),$.ajax({type:"GET",timeout:ae,dataType:g,jsonp:"callback",url:c+y+i+"&dev="+requestDev,success:function(e){le=0;try{var t=e.VideoPlayInfo.errorInfo.errorMessage;t.length<1?(v=ue(e.VideoPlayInfo.videoUrls),e.VideoPlayInfo.mov,e.VideoPlayInfo.auth,O()):O(t)}catch(e){console.log(e),O("Api Data Parsing Error [v f i]")}},error:function(e){++le<oe?t(i):O(scenappsmError.NETWORK_ERROR.message+"[v f i]")}})}(s)}else null!=e.VideoDetail.videoInfo&&(m=e.VideoDetail.videoInfo.thumbnail_url),O(t)}catch(e){console.log(e),O("Api Data Parsing Error [v i]")}},error:function(e){++le<oe?se(s):O(scenappsmError.NETWORK_ERROR.message+"[v i]")}})}function ue(e){var t,i=[],a=!1,l=-1;for(t in e){var o={};o.audioBitrate=e[t].audioBitrate,o.videoBitrate=e[t].videoBitrate,"true"==e[t].isDefault||1==e[t].isDefault?(l=t,o.default=a=!0):o.default=!1,o.format=e[t].format,o.label=e[t].label,o.width=e[t].width,o.height=e[t].height,o.duration=scenappsm.intToTime(e[t].duration/1e3),o.src=ce(e[t].url),"m3u8"==o.format&&(o.liveSyncCount=H),i[t]=o,o=null}return i.sort(function(e,t){return e.height-t.height}),"m3u8"!=i[0].format&&"m3u8-audio"!=i[0].format||(Y.default=0==a,Y.liveDefaultIndex=-1!=l?l:0,i.unshift(Y)),i}function de(e){return null==e||(null!=e.PLAYER?e.videoTitle=R:(e.PLAYER={},null==e.frontAdUrl?e.PLAYER.preRoll=null:e.PLAYER.preRoll={product:{google_ad_tag:null,type:"WECANDEO_AD",video:{click_url:e.front_ad_target_url,skip_btn_yn:e.skipbuttonYN,skip_pos_time:e.skip_pos_time,url:ce(e.frontAdUrl)}}},(e.PLAYER.overlay=null)==e.postAdUrl?e.PLAYER.postRoll=null:e.PLAYER.postRoll={product:{google_ad_tag:null,type:"WECANDEO_AD",video:{click_url:e.post_ad_target_url,skip_btn_yn:e.skipbuttonYN,skip_pos_time:e.skip_pos_time,url:ce(e.postAdUrl)}}})),e}function ce(e,t){if(null==e||""==e)return e;if("string"==typeof e)e=e.replace("http:",location.protocol);else if("object"==typeof e)for(var i in e)e[i][t]=e[i][t].replace("http:",location.protocol);return e}function pe(e){_playURL=p+"/"+t+"/v/?key="+e,a={url:_playURL,list:[{title:"URL",code:_playURL},{title:"iFrame",code:'<iframe width="640" height="360" src="'+_playURL+'" frameborder="0" allowfullscreen allow="autoplay;fullscreen;"></iframe>'}]}}function fe(e){return 0<e.indexOf("m3u8")?"m3u8":0<e.indexOf("mpd")?"mpd":"mp4"}this.isFP=function(){return 1==h},this.getPlaybackRateList=function(){return ie},this.getContent=function(){return te},this.isCaptionDisable=function(){return ee},this.isScreenEvent=function(){return Z},this.getThumbnailSheetURL=function(){return Q},this.getSkipForwardInterval=function(){return J},this.isPreload=function(){return z},this.isDVR=function(){return B},this.isVR=function(){return M},this.getPlayerType=function(){return null==F?"A01":F},this.getIosData=function(){var e={};return e.hmac=u.getParams().hmac,null==e.hmac&&(e.hmac=u.getCookie("wecandeo_hmac"),0!=e.hmac&&(e.hmac=e.hmac.replace(/\"/g,""))),e.content_id=j,e.gid=A,e.thumb_index="1",e.title=R,e.return_url=""==document.referrer?document.referrer:location.href,e.videokey=u.getKey(),e.watermark=X,function(e){e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var a=e.charCodeAt(i);a<128?t+=String.fromCharCode(a):(127<a&&a<2048?t+=String.fromCharCode(a>>6|192):(t+=String.fromCharCode(a>>12|224),t+=String.fromCharCode(a>>6&63|128)),t+=String.fromCharCode(63&a|128))}return t}(e);for(var t,i,a,l,o,r,n="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u=0;u<e.length;)a=(r=e.charCodeAt(u++))>>2,l=(3&r)<<4|(t=e.charCodeAt(u++))>>4,o=(15&t)<<2|(i=e.charCodeAt(u++))>>6,r=63&i,isNaN(t)?o=r=64:isNaN(i)&&(r=64),n=n+s.charAt(a)+s.charAt(l)+s.charAt(o)+s.charAt(r);return n}(JSON.stringify(e))},this.getGaCode=function(){return G},this.getSeekEnabled=function(){return W},this.getStartVolume=function(){return w},this.getStartTime=function(){return q},this.getAutoPlay=function(){return x},this.getCss=function(){return ce(f)},this.getLiveData=function(){return{gid:A,chid:_chid,bid:_bid,beid:_beid,playerID:_playerID}},this.getCuePoint=function(){return L},this.getRelatedList=function(){return C},this.getPlaylist=function(){return s},this.isPlaylist=function(){return k},this.isKeyboard=function(){return T},this.getWatermarkLink=function(){return ce(V)},this.getLogoLink=function(){return ce(P)},this.getViralLink=function(){return ce(I)},this.getSource=function(){return{title:R,desc:E,poster:ce(m),dRate:_,videoURL:Y,share:a,quality:v,caption:D,adInfo:N,gid:A,vid:b,drmCid:j}},this.getShare=function(){return a},this.updateAdInfo=de,this.loadRelatedPlaylistInfo=function t(i,a){O=a,$.ajax({type:"GET",timeout:ae,dataType:"jsonp",jsonp:"callback",url:c+"/player/playlist/detail.jsonp?playlistKey="+i,success:function(e){le=0;try{var t=e.playlistDetail.errorInfo.errorMessage;if(t.length<1){var i={};i.playlistName=e.playlistDetail.playlist.playlistName,i.playlistKey=e.playlistDetail.playlist.playlistKey,i.id=e.playlistDetail.playlist.id,C=[i],null!=e.playlistDetail.playlist.relatedPlaylist&&(C=C.concat(e.playlistDetail.playlist.relatedPlaylist));try{id=e.playlistDetail.videos[0].id,s=function(e){var t,i=[];for(t in e)i[t]=ne(e[t]),i[t].index=t,i[t].default=i[t].id==b;return i}(e.playlistDetail.videos),S=s[0].key,se(s[0].key)}catch(e){O(scenappsmError.EMPTY_PLAYLIST.message)}}else O(t)}catch(e){console.log(e),O("Api Data Parsing Error [p l i]")}},error:function(e){++le<oe?t(i,a):O(scenappsmError.NETWORK_ERROR.message+"[p l i]")}})},this.loadPlaylistInfo=function t(i,a){O=a,u.notifyObserver(scenappsmEvent.VIDEO_BUFFERING),$.ajax({type:"GET",timeout:ae,dataType:"jsonp",jsonp:"callback",url:c+"/v1/player/videos.jsonp?k={KEY}&page=1&pagesize={LENGTH}&sort={ORDER}".replace("{KEY}",i).replace("{ORDER}",l).replace("{LENGTH}",o),success:function(e){le=0;var t=e.videoInfoList.errorInfo.errorMessage;if(t.length<1){var i,a=e.videoInfoList.videoDetailList;for(i in s=[],a)s[i]=ne(a[i]),s[i].index=i,s[i].default=s[i].id==b;O()}else null!=e.VideoDetail.videoInfo&&(m=e.VideoDetail.videoInfo.thumbnail_url),O(t)},error:function(e){++le<oe?t(i,a):O(scenappsmError.NETWORK_ERROR.message+"[p l]")}})},this.loadInfo=function(e,t,i){var a,l;N=R=O=m=D=v=null,u.notifyObserver(scenappsmEvent.VIDEO_BUFFERING),O=t,"live"==u.getPACK()?(a=e,l=i,$.ajax({type:"GET",dataType:g,jsonp:"callback",url:c+r+a+(null!=l?"&"+l:"")+"&udate="+u.getParams().udate,success:function(e){try{var t=e.VideoDetail.errorInfo.errorMessage;t.length<1?(u.getParams().isWe||u.getParams().builder||(document.title=re(e.VideoDetail.videoInfo.title)),pe(e.VideoDetail.videoInfo.access_key),B="Y"==e.VideoDetail.videoInfo.use_dvr,H=2,Y={src:ce(e.VideoDetail.castUrl),label:"Auto",format:fe(e.VideoDetail.castUrl),liveSyncCount:H},_chid=e.VideoDetail.chid,_bid=e.VideoDetail.bid,_beid=e.VideoDetail.beid,A=e.VideoDetail.gid,_playerID=e.VideoDetail.PlayerType.id,f=e.VideoDetail.PlayerType.config_url+"?udate="+e.VideoDetail.PlayerType.udate,P=e.VideoDetail.PlayerType.logo_link,V=e.VideoDetail.PlayerType.watermark_link,T="Y"==e.VideoDetail.PlayerType.hot_key||null==e.VideoDetail.PlayerType.hot_key,R=e.VideoDetail.videoInfo.title,E=e.VideoDetail.videoInfo.cdate,x="Y"==e.VideoDetail.PlayerType.auto_start,w=e.VideoDetail.PlayerType.start_volume,K="Y"==e.VideoDetail.PlayerType.use_start_volume,q=e.VideoDetail.PlayerType.start_time,W=e.VideoDetail.PlayerType.seek_disable,G=e.VideoDetail.PlayerType.ga_code,m=e.VideoDetail.videoInfo.thumbnail_url,F=e.VideoDetail.PlayerType.player_skin,N=de(e.VideoDetail.adInfo),M="Y"==e.VideoDetail.videoInfo.vr_service,Z="N"!=e.VideoDetail.PlayerType.use_screen_event,null==l?(i=a,requestDev="1",null!=navigator.userAgent.match(/Android/i)?requestDev="3":null!=navigator.userAgent.match(/iPhone|iPad|iPod/i)&&(requestDev="2"),$.ajax({type:"GET",dataType:g,jsonp:"callback",timeout:ae,url:c+n+i+"&dev="+requestDev+"&udate="+u.getParams().udate,success:function(e){try{var t=e.VideoPlayInfo.errorInfo.errorMessage;t.length<1?(v=ue(e.VideoPlayInfo.videoUrls.reverse()),""!=d&&null!=d&&function(e){for(var t=u.getUserAgent().isMobile()?u.getUserAgent().isIOS()?e.ios:e.aos:e.pc,i=!1,a=0;a<v.length;a++)t==v[a].height?(Y.liveDefaultIndex=a,v[a].default=i=!0):v[a].default=!1;i||"Auto"!=v[0].label||(v[0].default=!0)}(e.VideoPlayInfo),null==Y.liveDefaultIndex&&(v[v.length-1].default=!0,Y.liveDefaultIndex=v.length-1),O()):O(t)}catch(e){console.log(e),O("Api Data Parsing Error [l f i]")}},error:function(e){O(scenappsmError.NETWORK_ERROR.message+"[l f i]")}})):O()):(null!=e.VideoDetail.videoInfo&&(m=e.VideoDetail.videoInfo.thumbnail_url),O(t))}catch(e){console.log(e),O("Api Data Parsing Error [l i]")}var i},error:function(e,t){O(scenappsmError.NETWORK_ERROR.message+"[l i]")},timeout:ae})):se(e)},this.getRelatedFirstKey=function(){return S},this.setPlaylistMaxResults=function(e){""!=e&&null!=e&&(o=e)},this.setPlaylistOrder=function(e){""!=e&&null!=e&&(l=e)},this.setPlayerKey=function(e){U=e},this.setUserWatermark=function(e){X=e},this.isStartVolume=function(){return K}},wecandeoData});