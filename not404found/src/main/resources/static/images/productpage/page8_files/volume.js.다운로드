define(["ui/controls"],function(){return smVolume=function(e){var a=e;a.registerObserver(this);var m,t=null,i=null,e=null,o=!1,c=.5,t=scenappsm._elements.createElement("div","",""),e=scenappsm._elements.createMultiElement([{name:"div",className:a.getCssReform("mute-display btn-area volum"),id:"VolumMute"},{name:"button",className:a.getCssReform("icon icon-controls icon-volum icon-volume-unmuted"),id:""}]);t.appendChild(e);var n=scenappsm._elements.getFirstElementsByTagName(e,"button");if(n.ariaLabel=ScenappsmAccessbility.mute,scenappsm.addEventListener(e,"click",function(){o=0<=n.className.indexOf("unmuted"),i&&i.excute(scenappsmPlayerCommand.MUTED,o)}),!a.getUserAgent().isMobile()){var p=scenappsm._elements.createSecondDepthElement("div",a.getCssReform("volume-display volume-control"),"div",a.getCssReform("volumerail"));p.tabIndex=0,p.id="_volumeSlider",p.style.overflow="hidden",p.setAttribute("role","slider"),p.setAttribute("aria-valuemin","0"),p.setAttribute("aria-valuemax","100"),p.setAttribute("draggable",!0);var l=scenappsm._elements.getFirstElementsByTagName(p,"div"),s=scenappsm._elements.createElement("ul");l.appendChild(s);for(var r=0;r<8;r++){var u=scenappsm._elements.createElement("li",a.getCssReform("volume-on"));s.appendChild(u)}t.appendChild(p)}function v(){this.blur(),this.removeEventListener("focus",v)}this.setController=function(e){i=e},this.getContainer=function(){return t},this.update=function(e,t){e===scenappsmEvent.VIDEO_VOLUME&&(c=1==t.muted?(_mutedVolume=t.volume,0):t.volume,o=t.muted,p&&(p.setAttribute("aria-valuenow",parseInt(100*t.volume)),p.setAttribute("aria-valuetext",ScenappsmAccessbility.volume+parseInt(100*t.volume)+"%")),n.className=t.muted?a.getCssReform("icon icon-controls icon-volum icon-volume-muted"):a.getCssReform("icon icon-controls icon-volum icon-volume-unmuted"),n.ariaLabel=o?ScenappsmAccessbility.unmute:ScenappsmAccessbility.mute,function(){if(s)for(var e=s.getElementsByTagName("li"),t=1/e.length,n=0;n<e.length;n++)e[n].className=c<=n*t?"":a.getCssReform("volume-on")}())},l&&scenappsm.addEventListener(l,scenappsm.eventDown,function e(t){switch(t.type){case scenappsm.eventDown:m=!0,scenappsm.addEventListener(window,scenappsm.eventMove,e),scenappsm.addEventListener(window,scenappsm.eventUp,e),scenappsm.addEventListener(window,scenappsm.eventOut,e),1==o&&0<c&&c<=1&&i.excute(scenappsmPlayerCommand.MUTED,!1),p.addEventListener("focus",v);case scenappsm.eventMove:1==o&&0<c&&c<=1&&i.excute(scenappsmPlayerCommand.MUTED,!1);var n="touchmove"==t.type?event.touches[0].pageX:t.clientX,s=l.offsetWidth<a.getCorrectSize(l,"width")?parseInt(100*l.getBoundingClientRect().left):scenappsm.getAbsolutePosition(l).x;c=Number(Math.min(1,Math.max(0,(n-s)/a.getCorrectSize(l,"width"))).toFixed(5)),i&&i.excute(scenappsmPlayerCommand.VOLUME,100*c);break;case scenappsm.eventUp:case scenappsm.eventOut:if(m&&t.type==scenappsm.eventOut)return;m=!1,scenappsm.removeEventListener(window,scenappsm.eventMove,e),scenappsm.removeEventListener(window,scenappsm.eventUp,e),scenappsm.removeEventListener(window,scenappsm.eventOut,e)}})},smVolume});