<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>admin_page</title>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="/css/admin/coupon/admin.css">
</head>
<body>
<header th:replace="/admin/common/adminHeader.html"></header>
<section>
    <div class="s_wrap">
        <h1>쿠폰관리</h1>

        <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.17/jquery-ui.min.js"></script>
        <script>
            jQuery(function($){
                $.datepicker.regional["ko"] = {
                    closeText: "닫기",
                    prevText: "이전달",
                    nextText: "다음달",
                    currentText: "오늘",
                    monthNames: ["1월(JAN)","2월(FEB)","3월(MAR)","4월(APR)","5월(MAY)","6월(JUN)", "7월(JUL)","8월(AUG)","9월(SEP)","10월(OCT)","11월(NOV)","12월(DEC)"],
                    monthNamesShort: ["1월","2월","3월","4월","5월","6월", "7월","8월","9월","10월","11월","12월"],
                    dayNames: ["일","월","화","수","목","금","토"],
                    dayNamesShort: ["일","월","화","수","목","금","토"],
                    dayNamesMin: ["일","월","화","수","목","금","토"],
                    weekHeader: "Wk",
                    dateFormat: "yymmdd",
                    firstDay: 0,
                    isRTL: false,
                    showMonthAfterYear: true,
                    yearSuffix: ""
                };
                $.datepicker.setDefaults($.datepicker.regional["ko"]);
            });
        </script>
        <h2>기본검색</h2>
        <form name="fsearch" id="fsearch" method="get">
            <input type="hidden" name="code" value="coupon">
            <div class="tbl_frm01">
                <table>
                    <colgroup>
                        <col class="w100">
                        <col>
                    </colgroup>
                    <tbody>
                    <tr>
                        <th scope="row">검색어</th>
                        <td>
                            <select name="sfl">
                                <option value="cp_subject">쿠폰명</option>
                                <option value="cp_explan">설명</option>
                            </select>
                            <input type="text" name="stx" value="" class="frm_input" size="30">
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">사용기간</th>
                        <td>
                            <label for="fr_date" class="sound_only">시작일</label>
                            <input type="date" name="fr_date" value="" id="fr_date" class="frm_input w80 hasDatepicker" maxlength="10">
                            &nbsp ~ &nbsp
                            <label for="to_date" class="sound_only"> 종료일</label>
                            <input type="date" name="to_date" value="" id="to_date" class="frm_input w80 hasDatepicker" maxlength="10">
                            <span class="btn_group">
                                <span class="btn_wrapper">
                                    <input type="button" onclick="search_date('fr_date','to_date',this.value);"
                                           class="btn_small white" value="오늘">
                                </span>
                                <span class="btn_wrapper">
                                    <input type="button" onclick="search_date('fr_date','to_date',this.value);"
                                           class="btn_small white" value="어제">
                                </span>
                                <span class="btn_wrapper">
                                    <input type="button" onclick="search_date('fr_date','to_date',this.value);"
                                           class="btn_small white" value="일주일">
                                </span>
                                <span class="btn_wrapper">
                                    <input type="button" onclick="search_date('fr_date','to_date',this.value);"
                                           class="btn_small white" value="지난달">
                                </span>
                                <span class="btn_wrapper">
                                    <input type="button" onclick="search_date('fr_date','to_date',this.value);"
                                           class="btn_small white" value="1개월">
                                </span>
                                <span class="btn_wrapper">
                                    <input type="button" onclick="search_date('fr_date','to_date',this.value);"
                                           class="btn_small white" value="3개월">
                                </span>
                                <span class="btn_wrapper">
                                    <input type="button" onclick="search_date('fr_date','to_date',this.value);"
                                           class="btn_small white" value="전체">
                                </span></span></td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="btn_confirm">
                <input type="submit" value="검색" class="btn_medium">
                <input type="button" value="초기화" id="frmRest" class="btn_medium grey">
            </div>
        </form>


        <form name="fcouponlist" id="fcouponlist" method="post" action="./goods/goods_coupon_delete.php" onsubmit="return fcouponlist_submit(this);">
            <input type="hidden" name="q1" value="code=coupon">
            <input type="hidden" name="page" value="1">

            <div class="local_ov mart30">
                전체 : <b class="fc_red">0</b> 건 조회
            </div>
            <div class="local_frm01">
                <input type="submit" name="act_button" value="선택삭제" class="btn_lsmall bx-white" onclick="document.pressed=this.value">
                <a href="coupon/insertCoupon" class="fr btn_lsmall red"><i class="ionicons ion-android-add"></i> 쿠폰등록</a></div>
            <div class="tbl_head01">
                <table>
                    <colgroup>
                        <col class="w20">
                        <col class="w20">
                        <col>
                        <col class="w80">
                        <col class="w80">
                        <col class="w80">
                        <col class="w80">
                        <col class="w50">
                        <col class="w80">
                        <col class="w20">
                    </colgroup>
                    <thead>
                    <tr>
                        <th scope="col"><input type="checkbox" name="chkall" value="1" onclick="check_all(this.form);"></th>
                        <th scope="col">번호</th>
                        <th scope="col"><a href="/admin/goods.php?code=coupon&amp;page=&amp;filed=cp_type&amp;orderby=asc">쿠폰유형</a> (쿠폰명)</th>
                        <th scope="col">할인율(금액)</th>
                        <th scope="col">사용일</th>
                        <th scope="col">종료일</th>
                        <th scope="col">적용대상</th>
                        <th scope="col"><a href="/admin/goods.php?code=coupon&amp;page=&amp;filed=cp_use&amp;orderby=asc">상태</a></th>
                        <th scope="col">등록일</th>
                        <th scope="col">수정</th>
                    </tr>
                    </thead>
                    <tbody><tr><td colspan="10" class="empty_table">자료가 없습니다.</td></tr>	</tbody>
                </table>
            </div>
            <div class="local_frm02">
                <input type="submit" name="act_button" value="선택삭제" class="btn_lsmall bx-white" onclick="document.pressed=this.value">
                <a href="coupon/insertCoupon" class="fr btn_lsmall red"><i class="ionicons ion-android-add"></i> 쿠폰등록</a></div>
        </form>


        <script>
            function fcouponlist_submit(f)
            {
                if(!is_checked("chk[]")) {
                    alert(document.pressed+" 하실 항목을 하나 이상 선택하세요.");
                    return false;
                }

                if(document.pressed == "선택삭제") {
                    if(!confirm("선택한 자료를 정말 삭제하시겠습니까?")) {
                        return false;
                    }
                }

                return true;
            }

            $(function(){
                // 날짜 검색 : TODAY MAX값으로 인식 (maxDate: "+0d")를 삭제하면 MAX값 해제
                $("#fr_date, #to_date").datepicker({ changeMonth: true, changeYear: true, dateFormat: "yy-mm-dd", showButtonPanel: true, yearRange: "c-99:c+99", maxDate: "+0d" });
            });
        </script>

        <script>
            $(document).ready(function () {
                var startDate, endDate; // 변수를 선언하고 초기화해야 합니다.

                // 오늘 날짜 구하기
                var today = new Date();

                // datepicker 초기화 함수
                function initDatepicker($element) {
                    $element.datepicker({
                        dateFormat: 'yy-mm-dd',
                        minDate: 0,
                        defaultDate: today,
                        onSelect: function (selectedDate) {
                            startDate = new Date(selectedDate);
                            updateEndDatepicker(startDate);
                        }
                    });
                    $element.val($.datepicker.formatDate('yy-mm-dd', today));
                }

                // 각각의 datepicker 초기화
                initDatepicker($('#fr_date'));
                initDatepicker($('#to_date'));

                function updateEndDatepicker(startDate) {
                    $('#to_date').datepicker('option', 'minDate', startDate);
                }
            });



        </script>
    </div>
</section>
</body>
</html>
